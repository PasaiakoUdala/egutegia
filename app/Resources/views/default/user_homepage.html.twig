{% extends 'base.html.twig' %}

{% block page_header %}
    <div class="page-header hovebutton">

        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-11">
                        <h3 class="panel-title">{{ calendar.name }}</h3>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                {#<div class="row">#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.urteko.orduak' | trans }}</strong> {{ calendar.hoursYear}}</div>#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.opor.orduak' | trans }} </strong> {{ calendar.hoursFree }}</div>#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.norberarentzako' | trans }} </strong> {{ calendar.hoursSelf}}</div>#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.konpentsatzeke' | trans }} </strong> {{ calendar.hoursCompensed }}</div>#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.sindikalak' | trans }} </strong> {{ calendar.hoursSindikal }}</div>#}
                    {#<div class="col-sm-2"><strong>{{ 'msg.portzentaia' | trans }} </strong> {{ calendar.percentYear }}</div>#}
                {#</div>#}

                <div class="row">
                    <div class="col-sm-4">
                        <strong>{{ 'msg.urteko.orduak' | trans }}</strong>
                        <span id="hoursYear">{{ calendar.hoursYear }}</span>
                    </div>
                    <div class="col-sm-4">
                        <strong>{{ 'msg.konpentsatzeke' | trans }} </strong>
                        <span id="hoursCompensed">{{ calendar.hoursCompensed }}</span>
                    </div>
                    <div class="col-sm-4">
                        <strong>{{ 'msg.opor.orduak' | trans }} </strong>
                        <span id="hoursFree">{{ calendar.hoursFree }} ({{ (calendar.hoursFree / calendar.hoursDay) | round (2) }} egun) </span>
                        <input id="txtHoursFree" type="hidden" value="{{ calendar.hoursFree }}">
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-4">
                        <strong>{{ 'msg.lanaldi' | trans }} </strong>
                        <span id="percentYear">{{ calendar.percentYear }}%</span>
                    </div>
                    <div class="col-sm-4">
                        <strong>{{ 'msg.sindikalak' | trans }} </strong>
                        <span id="hoursCompensed">{{ calendar.hoursSindikal }}</span>
                    </div>
                    <div class="col-sm-4">
                        <strong>{{ 'msg.norberarentzako' | trans }} </strong>
                        <span id="hoursSelf"> {{ calendar.hoursSelf }} ordu ({{ (calendar.hoursSelf / calendar.hoursDay) | round (2) }} egun)</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-4">
                        <strong>{{ 'msg.eguneko.lanaldia' | trans }}</strong>
                        <span>{{ calendar.hoursDay }}</span><span id="hourLanaldi"></span>
                        <input id="numberLanaldi" type="hidden" value="{{ calendar.hoursDay }}">
                    </div>


                    <div class="col-sm-4">

                    </div>

                    <div class="col-sm-4">
                        <input id="txtNorbereZatika" type="hidden" value="{{ selfHoursPartial }}">
                        <input id="numberHoursPartial" type="hidden" value="{{ selfHoursPartial }}">
                        <ul class="list-inline">
                            <li>Zatitu daitezke:</li>
                            <li id="selfHoursPartial">{{ selfHoursPartial }} <span id="selfHoursPartialToHour"></span> ({{ (selfHoursPartial / calendar.hoursDay) | round (2) }} egun)</li>
                        </ul>
                        <ul class="list-inline">
                            <li>Egun osoak:</li>
                            <li id="selfHoursComplete">{{ selfHoursComplete }} ({{ (selfHoursComplete / calendar.hoursDay) | round (2) }} egun)</li>
                        </ul>

                        {#<dl class="dl-horizontal">#}
                        {#<dt>Zatitu daitezke:</dt>#}
                        {#<dd id="selfHoursPartial">{{ selfHoursPartial }} <span id="selfHoursPartialToHour"></span> ({{ (selfHoursPartial / calendar.hoursDay) | round (2) }} egun)</dd>#}
                        {#<dt>Egun osoak:</dt>#}
                        {#<dd id="selfHoursComplete">{{ selfHoursComplete }} ({{ (selfHoursComplete / calendar.hoursDay) | round (2) }} egun)</dd>#}
                        {#</dl>#}
                    </div>
                </div>


            </div>
        </div>
    </div>
{% endblock page_header %}

{% block content_content %}


    <div id="usercalendar" class="usercalendar"></div>

    <input type="hidden" id="calendarid" value="{{ calendar.id }}">
    <input type="hidden" id="templateid" value="{{ calendar.template.id }}">

{% endblock %}

{% block content_sidebar %}
    {{ render(controller('AppBundle:Type:list', {'calendarid': calendar.id} )) }}
    {#{{ render(controller('AppBundle:Document:list', {'calendarid': calendar.id} )) }}#}

{% endblock content_sidebar %}

{% block foot_script %}
    {{ parent() }}
    <script src="{{ asset('js/calendar-user.js') }}"></script>
    <script>
        $(function () {
            /*************************************************************************************************************/
          /** MISC *****************************************************************************************************/
            /*************************************************************************************************************/
          var x = parseFloat($('#numberLanaldi').val())
          var textua = " ( " + moment.duration(x, 'hours').hours() + ' ordu ' + moment.duration(x, 'hours').minutes() +  " minutu )"
          $('#hourLanaldi').text(textua)

          var x1 = parseFloat($('#numberHoursPartial').val())
          var textua1 = " ( " + moment.duration(x1, 'hours').hours() + ' ordu ' + moment.duration(x1, 'hours').minutes() +  " minutu )"
          $('#selfHoursPartialToHour').text(textua1)
        });
    </script>
{% endblock %}